<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å°å¹³å¸‚ç™½åœ°å›³</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: "Hiragino Kaku Gothic ProN", "Hiragino Sans", "BIZ UDPGothic", "Meiryo", sans-serif;
        }
        
        #map {
            height: 100vh;
            width: 100vw;
        }
        
        .control-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            font-size: 12px;
        }
        
        .legend {
            position: absolute;
            bottom: 10px;
            left: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            z-index: 1000;
            font-size: 11px;
        }
        
        .legend-item {
            margin: 3px 0;
            display: flex;
            align-items: center;
        }
        
        .legend-color {
            width: 20px;
            height: 3px;
            margin-right: 5px;
            border: 1px solid #ccc;
        }
        
        .legend-point {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 7px;
        }
        
        /* Custom popup styles */
        .leaflet-popup-content {
            font-size: 12px;
            line-height: 1.4;
        }
        
        /* Custom marker styles */
        .custom-marker {
            font-size: 10px;
            font-weight: bold;
            text-align: center;
            white-space: nowrap;
        }
        
        .station-marker {
            background: #ff4444;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .facility-marker {
            background: #4444ff;
            color: white;
            padding: 2px 4px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    
    <div class="control-panel">
        <h4 style="margin: 0 0 10px 0;">è¡¨ç¤ºåˆ‡æ›¿</h4>
        <label><input type="checkbox" id="toggle-boundaries" checked> å¢ƒç•Œç·š</label><br>
        <label><input type="checkbox" id="toggle-roads" checked> é“è·¯</label><br>
        <label><input type="checkbox" id="toggle-railways" checked> é‰„é“</label><br>
        <label><input type="checkbox" id="toggle-rivers" checked> æ²³å·</label><br>
        <label><input type="checkbox" id="toggle-facilities" checked> å…¬å…±æ–½è¨­</label>
    </div>
    
    <div class="legend">
        <h4 style="margin: 0 0 10px 0;">å‡¡ä¾‹</h4>
        <div class="legend-item">
            <div class="legend-color" style="background: #ff0000; border-color: #ff0000;"></div>
            <span>å¸‚å¢ƒç•Œ</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #0066cc; border-color: #0066cc;"></div>
            <span>ç”ºå¢ƒç•Œ</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #888888; border-color: #888888;"></div>
            <span>ä¸»è¦é“è·¯</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #333333; border-color: #333333;"></div>
            <span>é‰„é“</span>
        </div>
        <div class="legend-item">
            <div class="legend-color" style="background: #0099ff; border-color: #0099ff;"></div>
            <span>æ²³å·ãƒ»æ°´è·¯</span>
        </div>
        <div class="legend-item">
            <div class="legend-point" style="background: #ff4444;"></div>
            <span>é§…</span>
        </div>
        <div class="legend-item">
            <div class="legend-point" style="background: #4444ff;"></div>
            <span>å…¬å…±æ–½è¨­</span>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        // Leafletãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿å®Œäº†ã‚’å¾…ã¤
        document.addEventListener('DOMContentLoaded', function() {
            initializeMap();
        });
        
        function initializeMap() {
            // åœ°å›³ã®åˆæœŸåŒ–ï¼ˆå°å¹³å¸‚å½¹æ‰€ã‚’ä¸­å¿ƒã«ï¼‰
            const map = L.map('map').setView([35.7284, 139.4774], 13);

        // ãƒ™ãƒ¼ã‚¹åœ°å›³ã¯ä½¿ç”¨ã›ãšã€ç™½åœ°å›³ã¨ã—ã¦è¡¨ç¤º
        L.tileLayer('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNkYPhfDwAChwGA60e6kgAAAABJRU5ErkJggg==', {
            attribution: ''
        }).addTo(map);

        // ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚°ãƒ«ãƒ¼ãƒ—ã®ä½œæˆ
        const boundariesLayer = L.layerGroup().addTo(map);
        const roadsLayer = L.layerGroup().addTo(map);
        const railwaysLayer = L.layerGroup().addTo(map);
        const riversLayer = L.layerGroup().addTo(map);
        const facilitiesLayer = L.layerGroup().addTo(map);

        // å°å¹³å¸‚ã®å¢ƒç•Œï¼ˆæ¦‚ç•¥ï¼‰
        const kodairaBoundary = [
            [35.7484, 139.4474], [35.7384, 139.4874], [35.7084, 139.4974],
            [35.6984, 139.4674], [35.7084, 139.4374], [35.7284, 139.4274],
            [35.7484, 139.4474]
        ];

        // å¸‚å¢ƒç•Œã®æç”»
        L.polygon(kodairaBoundary, {
            color: '#ff0000',
            weight: 3,
            fillOpacity: 0,
            dashArray: '5, 5'
        }).bindPopup('å°å¹³å¸‚å¢ƒç•Œ').addTo(boundariesLayer);

        // ç”ºå¢ƒç•Œã¨ç”ºåã®ãƒ‡ãƒ¼ã‚¿
        const districts = [
            {name: 'å°å·ç”ºä¸€ä¸ç›®', center: [35.7384, 139.4774], boundary: [[35.7434, 139.4724], [35.7434, 139.4824], [35.7334, 139.4824], [35.7334, 139.4724], [35.7434, 139.4724]]},
            {name: 'å°å·ç”ºäºŒä¸ç›®', center: [35.7284, 139.4774], boundary: [[35.7334, 139.4724], [35.7334, 139.4824], [35.7234, 139.4824], [35.7234, 139.4724], [35.7334, 139.4724]]},
            {name: 'å°å·è¥¿ç”ºä¸€ä¸ç›®', center: [35.7384, 139.4674], boundary: [[35.7434, 139.4624], [35.7434, 139.4724], [35.7334, 139.4724], [35.7334, 139.4624], [35.7434, 139.4624]]},
            {name: 'å°å·è¥¿ç”ºäºŒä¸ç›®', center: [35.7284, 139.4674], boundary: [[35.7334, 139.4624], [35.7334, 139.4724], [35.7234, 139.4724], [35.7234, 139.4624], [35.7334, 139.4624]]},
            {name: 'å°å·è¥¿ç”ºä¸‰ä¸ç›®', center: [35.7184, 139.4674], boundary: [[35.7234, 139.4624], [35.7234, 139.4724], [35.7134, 139.4724], [35.7134, 139.4624], [35.7234, 139.4624]]},
            {name: 'å°å·è¥¿ç”ºå››ä¸ç›®', center: [35.7084, 139.4674], boundary: [[35.7134, 139.4624], [35.7134, 139.4724], [35.7034, 139.4724], [35.7034, 139.4624], [35.7134, 139.4624]]},
            {name: 'å°å·è¥¿ç”ºäº”ä¸ç›®', center: [35.6984, 139.4674], boundary: [[35.7034, 139.4624], [35.7034, 139.4724], [35.6934, 139.4724], [35.6934, 139.4624], [35.7034, 139.4624]]},
            {name: 'å°å·æ±ç”ºä¸€ä¸ç›®', center: [35.7384, 139.4874], boundary: [[35.7434, 139.4824], [35.7434, 139.4924], [35.7334, 139.4924], [35.7334, 139.4824], [35.7434, 139.4824]]},
            {name: 'å°å·æ±ç”ºäºŒä¸ç›®', center: [35.7284, 139.4874], boundary: [[35.7334, 139.4824], [35.7334, 139.4924], [35.7234, 139.4924], [35.7234, 139.4824], [35.7334, 139.4824]]},
            {name: 'å°å·æ±ç”ºä¸‰ä¸ç›®', center: [35.7184, 139.4874], boundary: [[35.7234, 139.4824], [35.7234, 139.4924], [35.7134, 139.4924], [35.7134, 139.4824], [35.7234, 139.4824]]},
            {name: 'å°å·æ±ç”ºå››ä¸ç›®', center: [35.7084, 139.4874], boundary: [[35.7134, 139.4824], [35.7134, 139.4924], [35.7034, 139.4924], [35.7034, 139.4824], [35.7134, 139.4824]]},
            {name: 'å°å·æ±ç”ºäº”ä¸ç›®', center: [35.6984, 139.4874], boundary: [[35.7034, 139.4824], [35.7034, 139.4924], [35.6934, 139.4924], [35.6934, 139.4824], [35.7034, 139.4824]]},
            {name: 'èŠ±å°é‡‘äº•ä¸€ä¸ç›®', center: [35.7484, 139.4574], boundary: [[35.7534, 139.4524], [35.7534, 139.4624], [35.7434, 139.4624], [35.7434, 139.4524], [35.7534, 139.4524]]},
            {name: 'èŠ±å°é‡‘äº•äºŒä¸ç›®', center: [35.7484, 139.4474], boundary: [[35.7534, 139.4424], [35.7534, 139.4524], [35.7434, 139.4524], [35.7434, 139.4424], [35.7534, 139.4424]]},
            {name: 'èŠ±å°é‡‘äº•ä¸‰ä¸ç›®', center: [35.7484, 139.4374], boundary: [[35.7534, 139.4324], [35.7534, 139.4424], [35.7434, 139.4424], [35.7434, 139.4324], [35.7534, 139.4324]]},
            {name: 'èŠ±å°é‡‘äº•å››ä¸ç›®', center: [35.7384, 139.4374], boundary: [[35.7434, 139.4324], [35.7434, 139.4424], [35.7334, 139.4424], [35.7334, 139.4324], [35.7434, 139.4324]]},
            {name: 'èŠ±å°é‡‘äº•äº”ä¸ç›®', center: [35.7284, 139.4374], boundary: [[35.7334, 139.4324], [35.7334, 139.4424], [35.7234, 139.4424], [35.7234, 139.4324], [35.7334, 139.4324]]},
            {name: 'èŠ±å°é‡‘äº•å…­ä¸ç›®', center: [35.7184, 139.4374], boundary: [[35.7234, 139.4324], [35.7234, 139.4424], [35.7134, 139.4424], [35.7134, 139.4324], [35.7234, 139.4324]]},
            {name: 'èŠ±å°é‡‘äº•ä¸ƒä¸ç›®', center: [35.7084, 139.4374], boundary: [[35.7134, 139.4324], [35.7134, 139.4424], [35.7034, 139.4424], [35.7034, 139.4324], [35.7134, 139.4324]]},
            {name: 'èŠ±å°é‡‘äº•å…«ä¸ç›®', center: [35.6984, 139.4374], boundary: [[35.7034, 139.4324], [35.7034, 139.4424], [35.6934, 139.4424], [35.6934, 139.4324], [35.7034, 139.4324]]},
            {name: 'å›ç”°ç”º', center: [35.7284, 139.4574], boundary: [[35.7334, 139.4524], [35.7334, 139.4624], [35.7234, 139.4624], [35.7234, 139.4524], [35.7334, 139.4524]]},
            {name: 'ä¸Šæ°´æœ¬ç”ºä¸€ä¸ç›®', center: [35.7084, 139.4574], boundary: [[35.7134, 139.4524], [35.7134, 139.4624], [35.7034, 139.4624], [35.7034, 139.4524], [35.7134, 139.4524]]},
            {name: 'ä¸Šæ°´æœ¬ç”ºäºŒä¸ç›®', center: [35.6984, 139.4574], boundary: [[35.7034, 139.4524], [35.7034, 139.4624], [35.6934, 139.4624], [35.6934, 139.4524], [35.7034, 139.4524]]},
            {name: 'ä¸Šæ°´æœ¬ç”ºä¸‰ä¸ç›®', center: [35.6884, 139.4574], boundary: [[35.6934, 139.4524], [35.6934, 139.4624], [35.6834, 139.4624], [35.6834, 139.4524], [35.6934, 139.4524]]},
            {name: 'ä¸Šæ°´æœ¬ç”ºå››ä¸ç›®', center: [35.6784, 139.4574], boundary: [[35.6834, 139.4524], [35.6834, 139.4624], [35.6734, 139.4624], [35.6734, 139.4524], [35.6834, 139.4524]]},
            {name: 'ä¸Šæ°´æœ¬ç”ºäº”ä¸ç›®', center: [35.6684, 139.4574], boundary: [[35.6734, 139.4524], [35.6734, 139.4624], [35.6634, 139.4624], [35.6634, 139.4524], [35.6734, 139.4524]]},
            {name: 'ä¸Šæ°´æœ¬ç”ºå…­ä¸ç›®', center: [35.6584, 139.4574], boundary: [[35.6634, 139.4524], [35.6634, 139.4624], [35.6534, 139.4624], [35.6534, 139.4524], [35.6634, 139.4524]]},
            {name: 'ä¸Šæ°´å—ç”ºä¸€ä¸ç›®', center: [35.7084, 139.4774], boundary: [[35.7134, 139.4724], [35.7134, 139.4824], [35.7034, 139.4824], [35.7034, 139.4724], [35.7134, 139.4724]]},
            {name: 'ä¸Šæ°´å—ç”ºäºŒä¸ç›®', center: [35.6984, 139.4774], boundary: [[35.7034, 139.4724], [35.7034, 139.4824], [35.6934, 139.4824], [35.6934, 139.4724], [35.7034, 139.4724]]},
            {name: 'ä¸Šæ°´å—ç”ºä¸‰ä¸ç›®', center: [35.6884, 139.4774], boundary: [[35.6934, 139.4724], [35.6934, 139.4824], [35.6834, 139.4824], [35.6834, 139.4724], [35.6934, 139.4724]]},
            {name: 'ä¸Šæ°´å—ç”ºå››ä¸ç›®', center: [35.6784, 139.4774], boundary: [[35.6834, 139.4724], [35.6834, 139.4824], [35.6734, 139.4824], [35.6734, 139.4724], [35.6834, 139.4724]]},
            {name: 'éˆ´æœ¨ç”ºä¸€ä¸ç›®', center: [35.7384, 139.4574], boundary: [[35.7434, 139.4524], [35.7434, 139.4624], [35.7334, 139.4624], [35.7334, 139.4524], [35.7434, 139.4524]]},
            {name: 'éˆ´æœ¨ç”ºäºŒä¸ç›®', center: [35.7184, 139.4574], boundary: [[35.7234, 139.4524], [35.7234, 139.4624], [35.7134, 139.4624], [35.7134, 139.4524], [35.7234, 139.4524]]},
            {name: 'æ´¥ç”°ç”ºä¸€ä¸ç›®', center: [35.7084, 139.4974], boundary: [[35.7134, 139.4924], [35.7134, 139.5024], [35.7034, 139.5024], [35.7034, 139.4924], [35.7134, 139.4924]]},
            {name: 'æ´¥ç”°ç”ºäºŒä¸ç›®', center: [35.6984, 139.4974], boundary: [[35.7034, 139.4924], [35.7034, 139.5024], [35.6934, 139.5024], [35.6934, 139.4924], [35.7034, 139.4924]]},
            {name: 'æ´¥ç”°ç”ºä¸‰ä¸ç›®', center: [35.6884, 139.4974], boundary: [[35.6934, 139.4924], [35.6934, 139.5024], [35.6834, 139.5024], [35.6834, 139.4924], [35.6934, 139.4924]]},
            {name: 'ä»²ç”º', center: [35.7184, 139.4774], boundary: [[35.7234, 139.4724], [35.7234, 139.4824], [35.7134, 139.4824], [35.7134, 139.4724], [35.7234, 139.4724]]},
            {name: 'å¤©ç¥ç”ºä¸€ä¸ç›®', center: [35.7284, 139.4974], boundary: [[35.7334, 139.4924], [35.7334, 139.5024], [35.7234, 139.5024], [35.7234, 139.4924], [35.7334, 139.4924]]},
            {name: 'å¤©ç¥ç”ºäºŒä¸ç›®', center: [35.7184, 139.4974], boundary: [[35.7234, 139.4924], [35.7234, 139.5024], [35.7134, 139.5024], [35.7134, 139.4924], [35.7234, 139.4924]]},
            {name: 'å¤©ç¥ç”ºä¸‰ä¸ç›®', center: [35.7384, 139.5074], boundary: [[35.7434, 139.5024], [35.7434, 139.5124], [35.7334, 139.5124], [35.7334, 139.5024], [35.7434, 139.5024]]},
            {name: 'å¤©ç¥ç”ºå››ä¸ç›®', center: [35.7284, 139.5074], boundary: [[35.7334, 139.5024], [35.7334, 139.5124], [35.7234, 139.5124], [35.7234, 139.5024], [35.7334, 139.5024]]},
            {name: 'å­¦åœ’è¥¿ç”ºä¸€ä¸ç›®', center: [35.6984, 139.4474], boundary: [[35.7034, 139.4424], [35.7034, 139.4524], [35.6934, 139.4524], [35.6934, 139.4424], [35.7034, 139.4424]]},
            {name: 'å­¦åœ’è¥¿ç”ºäºŒä¸ç›®', center: [35.6884, 139.4474], boundary: [[35.6934, 139.4424], [35.6934, 139.4524], [35.6834, 139.4524], [35.6834, 139.4424], [35.6934, 139.4424]]},
            {name: 'å­¦åœ’è¥¿ç”ºä¸‰ä¸ç›®', center: [35.6784, 139.4474], boundary: [[35.6834, 139.4424], [35.6834, 139.4524], [35.6734, 139.4524], [35.6734, 139.4424], [35.6834, 139.4424]]},
            {name: 'å­¦åœ’æ±ç”ºä¸€ä¸ç›®', center: [35.6984, 139.4874], boundary: [[35.7034, 139.4824], [35.7034, 139.4924], [35.6934, 139.4924], [35.6934, 139.4824], [35.7034, 139.4824]]},
            {name: 'å­¦åœ’æ±ç”ºäºŒä¸ç›®', center: [35.6884, 139.4874], boundary: [[35.6934, 139.4824], [35.6934, 139.4924], [35.6834, 139.4924], [35.6834, 139.4824], [35.6934, 139.4824]]},
            {name: 'å­¦åœ’æ±ç”ºä¸‰ä¸ç›®', center: [35.6784, 139.4874], boundary: [[35.6834, 139.4824], [35.6834, 139.4924], [35.6734, 139.4924], [35.6734, 139.4824], [35.6834, 139.4824]]},
            {name: 'å–œå¹³ç”ºä¸€ä¸ç›®', center: [35.7484, 139.4674], boundary: [[35.7534, 139.4624], [35.7534, 139.4724], [35.7434, 139.4724], [35.7434, 139.4624], [35.7534, 139.4624]]},
            {name: 'å–œå¹³ç”ºäºŒä¸ç›®', center: [35.7484, 139.4774], boundary: [[35.7534, 139.4724], [35.7534, 139.4824], [35.7434, 139.4824], [35.7434, 139.4724], [35.7534, 139.4724]]},
            {name: 'å–œå¹³ç”ºä¸‰ä¸ç›®', center: [35.7484, 139.4874], boundary: [[35.7534, 139.4824], [35.7534, 139.4924], [35.7434, 139.4924], [35.7434, 139.4824], [35.7534, 139.4824]]},
            {name: 'å¤§æ²¼ç”ºä¸€ä¸ç›®', center: [35.7584, 139.4474], boundary: [[35.7634, 139.4424], [35.7634, 139.4524], [35.7534, 139.4524], [35.7534, 139.4424], [35.7634, 139.4424]]},
            {name: 'å¤§æ²¼ç”ºäºŒä¸ç›®', center: [35.7584, 139.4574], boundary: [[35.7634, 139.4524], [35.7634, 139.4624], [35.7534, 139.4624], [35.7534, 139.4524], [35.7634, 139.4524]]},
            {name: 'å¤§æ²¼ç”ºä¸‰ä¸ç›®', center: [35.7584, 139.4674], boundary: [[35.7634, 139.4624], [35.7634, 139.4724], [35.7534, 139.4724], [35.7534, 139.4624], [35.7634, 139.4624]]},
            {name: 'å¤§æ²¼ç”ºå››ä¸ç›®', center: [35.7584, 139.4774], boundary: [[35.7634, 139.4724], [35.7634, 139.4824], [35.7534, 139.4824], [35.7534, 139.4724], [35.7634, 139.4724]]},
            {name: 'å¤§æ²¼ç”ºäº”ä¸ç›®', center: [35.7584, 139.4874], boundary: [[35.7634, 139.4824], [35.7634, 139.4924], [35.7534, 139.4924], [35.7534, 139.4824], [35.7634, 139.4824]]},
            {name: 'å¤§æ²¼ç”ºå…­ä¸ç›®', center: [35.7584, 139.4974], boundary: [[35.7634, 139.4924], [35.7634, 139.5024], [35.7534, 139.5024], [35.7534, 139.4924], [35.7634, 139.4924]]},
            {name: 'å¤§æ²¼ç”ºä¸ƒä¸ç›®', center: [35.7584, 139.5074], boundary: [[35.7634, 139.5024], [35.7634, 139.5124], [35.7534, 139.5124], [35.7534, 139.5024], [35.7634, 139.5024]]},
            {name: 'æ „ç”ºä¸€ä¸ç›®', center: [35.7384, 139.4974], boundary: [[35.7434, 139.4924], [35.7434, 139.5024], [35.7334, 139.5024], [35.7334, 139.4924], [35.7434, 139.4924]]},
            {name: 'æ „ç”ºäºŒä¸ç›®', center: [35.7484, 139.5074], boundary: [[35.7534, 139.5024], [35.7534, 139.5124], [35.7434, 139.5124], [35.7434, 139.5024], [35.7534, 139.5024]]},
            {name: 'æ „ç”ºä¸‰ä¸ç›®', center: [35.7184, 139.5074], boundary: [[35.7234, 139.5024], [35.7234, 139.5124], [35.7134, 139.5124], [35.7134, 139.5024], [35.7234, 139.5024]]}
        ];

        // ç”ºå¢ƒç•Œã¨ç”ºåã®æç”»
        districts.forEach(district => {
            // å¢ƒç•Œç·š
            L.polygon(district.boundary, {
                color: '#0066cc',
                weight: 1,
                fillOpacity: 0
            }).bindPopup(district.name).addTo(boundariesLayer);
            
            // ç”ºåãƒ©ãƒ™ãƒ«
            L.marker(district.center, {
                icon: L.divIcon({
                    className: 'custom-marker',
                    html: `<div style="background:rgba(255,255,255,0.8); padding:1px 3px; border-radius:2px; font-size:9px; border:1px solid #ccc;">${district.name}</div>`,
                    iconSize: [0, 0],
                    iconAnchor: [0, 0]
                })
            }).addTo(boundariesLayer);
        });

        // ä¸»è¦é“è·¯ã®ãƒ‡ãƒ¼ã‚¿
        const majorRoads = [
            {name: 'é’æ¢…è¡—é“', path: [[35.7484, 139.4274], [35.7484, 139.5074]], color: '#444444', weight: 4},
            {name: 'å°é‡‘äº•è¡—é“', path: [[35.7184, 139.4274], [35.7184, 139.5074]], color: '#444444', weight: 4},
            {name: 'ã•ãã‚‰é€šã‚Š', path: [[35.7084, 139.4274], [35.7084, 139.5074]], color: '#666666', weight: 3},
            {name: 'æ–°å°é‡‘äº•è¡—é“', path: [[35.6984, 139.4274], [35.6984, 139.5074]], color: '#666666', weight: 3},
            {name: 'æ­¦è”µé‡ç¾è¡“å¤§å­¦é€šã‚Š', path: [[35.6884, 139.4274], [35.6884, 139.5074]], color: '#666666', weight: 3},
            {name: 'æ±å¤§é€šã‚Š', path: [[35.7784, 139.4674], [35.6684, 139.4674]], color: '#666666', weight: 3},
            {name: 'åºœä¸­è¡—é“', path: [[35.7784, 139.4774], [35.6684, 139.4774]], color: '#666666', weight: 3},
            {name: 'å­¦åœ’æ±é€šã‚Š', path: [[35.7784, 139.4874], [35.6684, 139.4874]], color: '#666666', weight: 3},
            {name: 'å°å¹³3ãƒ»4ãƒ»19å·ç·š', path: [[35.7784, 139.4574], [35.6684, 139.4574]], color: '#888888', weight: 2},
            {name: 'å°å¹³3ãƒ»4ãƒ»11å·ç·š', path: [[35.7784, 139.4474], [35.6684, 139.4474]], color: '#888888', weight: 2},
            {name: 'å°å¹³3ãƒ»4ãƒ»12å·ç·š', path: [[35.7784, 139.4374], [35.6684, 139.4374]], color: '#888888', weight: 2}
        ];

        // é“è·¯ã®æç”»
        majorRoads.forEach(road => {
            const roadLine = L.polyline(road.path, {
                color: road.color,
                weight: road.weight,
                opacity: 0.8
            }).bindPopup(road.name).addTo(roadsLayer);
            
            // é“è·¯åãƒ©ãƒ™ãƒ«ï¼ˆä¸­ç‚¹ã«é…ç½®ï¼‰
            const midPoint = road.path[Math.floor(road.path.length / 2)];
            L.marker(midPoint, {
                icon: L.divIcon({
                    className: 'custom-marker',
                    html: `<div style="background:rgba(255,255,255,0.9); padding:1px 3px; border-radius:2px; font-size:8px; border:1px solid #666;">${road.name}</div>`,
                    iconSize: [0, 0],
                    iconAnchor: [0, 0]
                })
            }).addTo(roadsLayer);
        });

        // é‰„é“ã¨é§…ã®ãƒ‡ãƒ¼ã‚¿
        const railways = [
            {
                name: 'JRæ­¦è”µé‡ç·š',
                path: [[35.7084, 139.4274], [35.7084, 139.5074]],
                stations: [
                    {name: 'æ–°å°å¹³é§…', pos: [35.7084, 139.4574]},
                    {name: 'å°å¹³é§…', pos: [35.7084, 139.4774]}
                ]
            },
            {
                name: 'è¥¿æ­¦æ–°å®¿ç·š',
                path: [[35.7784, 139.4574], [35.6684, 139.4574]],
                stations: [
                    {name: 'èŠ±å°é‡‘äº•é§…', pos: [35.7484, 139.4574]},
                    {name: 'å°å¹³é§…', pos: [35.7084, 139.4574]}
                ]
            },
            {
                name: 'è¥¿æ­¦æ‹å³¶ç·š',
                path: [[35.7084, 139.4274], [35.7084, 139.4774]],
                stations: [
                    {name: 'å°å·é§…', pos: [35.7384, 139.4674]},
                    {name: 'æ±å¤§å‰é§…', pos: [35.7184, 139.4674]}
                ]
            },
            {
                name: 'è¥¿æ­¦å›½åˆ†å¯ºç·š',
                path: [[35.6984, 139.4274], [35.6984, 139.5074]],
                stations: [
                    {name: 'é·¹ã®å°é§…', pos: [35.6984, 139.4574]},
                    {name: 'å°å·é§…', pos: [35.6984, 139.4774]}
                ]
            }
        ];

        // é‰„é“ç·šã®æç”»
        railways.forEach(railway => {
            // ç·šè·¯
            L.polyline(railway.path, {
                color: '#333333',
                weight: 3,
                opacity: 0.9
            }).bindPopup(railway.name).addTo(railwaysLayer);
            
            // é§…
            railway.stations.forEach(station => {
                L.circleMarker(station.pos, {
                    radius: 6,
                    fillColor: '#ff4444',
                    color: '#ffffff',
                    weight: 2,
                    opacity: 1,
                    fillOpacity: 0.8
                }).bindPopup(`<strong>${station.name}</strong><br>${railway.name}`).addTo(railwaysLayer);
                
                // é§…åãƒ©ãƒ™ãƒ«
                L.marker(station.pos, {
                    icon: L.divIcon({
                        className: 'custom-marker station-marker',
                        html: station.name,
                        iconSize: [0, 0],
                        iconAnchor: [0, -20]
                    })
                }).addTo(railwaysLayer);
            });
        });

        // æ²³å·ãƒ»æ°´è·¯ã®ãƒ‡ãƒ¼ã‚¿
        const rivers = [
            {
                name: 'ç‰å·ä¸Šæ°´',
                path: [[35.7784, 139.4474], [35.7684, 139.4574], [35.7584, 139.4674], [35.7484, 139.4774], [35.7384, 139.4874], [35.7284, 139.4974], [35.7184, 139.5074], [35.7084, 139.5174]]
            },
            {
                name: 'é‡ç«æ­¢ç”¨æ°´',
                path: [[35.7284, 139.4274], [35.7284, 139.4374], [35.7284, 139.4474], [35.7284, 139.4574], [35.7284, 139.4674], [35.7284, 139.4774], [35.7284, 139.4874], [35.7284, 139.4974]]
            },
            {
                name: 'éˆ´æœ¨ç”¨æ°´',
                path: [[35.7384, 139.4574], [35.7384, 139.4674], [35.7384, 139.4774], [35.7384, 139.4874]]
            },
            {
                name: 'å°å¹³ç”¨æ°´',
                path: [[35.7184, 139.4574], [35.7184, 139.4674], [35.7184, 139.4774], [35.7184, 139.4874]]
            },
            {
                name: 'ç ‚å·ç”¨æ°´',
                path: [[35.6984, 139.4474], [35.6984, 139.4574], [35.6984, 139.4674], [35.6984, 139.4774]]
            }
        ];

        // æ²³å·ãƒ»æ°´è·¯ã®æç”»
        rivers.forEach(river => {
            L.polyline(river.path, {
                color: '#0099ff',
                weight: 3,
                opacity: 0.7
            }).bindPopup(river.name).addTo(riversLayer);
            
            // æ²³å·åãƒ©ãƒ™ãƒ«
            const midPoint = river.path[Math.floor(river.path.length / 2)];
            L.marker(midPoint, {
                icon: L.divIcon({
                    className: 'custom-marker',
                    html: `<div style="background:rgba(255,255,255,0.9); padding:1px 3px; border-radius:2px; font-size:8px; color:#0099ff; border:1px solid #0099ff;">${river.name}</div>`,
                    iconSize: [0, 0],
                    iconAnchor: [0, 0]
                })
            }).addTo(riversLayer);
        });

        // å…¬å…±æ–½è¨­ã®ãƒ‡ãƒ¼ã‚¿
        const facilities = [
            // å¸‚å½¹æ‰€ãƒ»åŒºå½¹æ‰€
            {name: 'å°å¹³å¸‚å½¹æ‰€', pos: [35.7284, 139.4774], type: 'å¸‚å½¹æ‰€', icon: 'ğŸ›ï¸'},
            
            // è­¦å¯Ÿç½²ãƒ»äº¤ç•ª
            {name: 'å°å¹³è­¦å¯Ÿç½²', pos: [35.7184, 139.4874], type: 'è­¦å¯Ÿç½²', icon: 'ğŸš”'},
            {name: 'èŠ±å°é‡‘äº•äº¤ç•ª', pos: [35.7484, 139.4574], type: 'äº¤ç•ª', icon: 'ğŸš”'},
            {name: 'å°å·äº¤ç•ª', pos: [35.7384, 139.4674], type: 'äº¤ç•ª', icon: 'ğŸš”'},
            {name: 'é·¹ã®å°äº¤ç•ª', pos: [35.6984, 139.4574], type: 'äº¤ç•ª', icon: 'ğŸš”'},
            {name: 'å­¦åœ’æ±ç”ºäº¤ç•ª', pos: [35.6884, 139.4874], type: 'äº¤ç•ª', icon: 'ğŸš”'},
            
            // æ¶ˆé˜²ç½²
            {name: 'å°å¹³æ¶ˆé˜²ç½²', pos: [35.7284, 139.4674], type: 'æ¶ˆé˜²ç½²', icon: 'ğŸš’'},
            {name: 'å°å¹³æ¶ˆé˜²ç½²èŠ±å°é‡‘äº•å‡ºå¼µæ‰€', pos: [35.7484, 139.4474], type: 'æ¶ˆé˜²ç½²', icon: 'ğŸš’'},
            {name: 'å°å¹³æ¶ˆé˜²ç½²å°å·å‡ºå¼µæ‰€', pos: [35.7384, 139.4574], type: 'æ¶ˆé˜²ç½²', icon: 'ğŸš’'},
            
            // å…¬æ°‘é¤¨
            {name: 'å°å¹³å¸‚ä¸­å¤®å…¬æ°‘é¤¨', pos: [35.7284, 139.4874], type: 'å…¬æ°‘é¤¨', icon: 'ğŸ¢'},
            {name: 'å°å¹³å¸‚èŠ±å°é‡‘äº•å—å…¬æ°‘é¤¨', pos: [35.7384, 139.4474], type: 'å…¬æ°‘é¤¨', icon: 'ğŸ¢'},
            {name: 'å°å¹³å¸‚å°å·å…¬æ°‘é¤¨', pos: [35.7384, 139.4774], type: 'å…¬æ°‘é¤¨', icon: 'ğŸ¢'},
            {name: 'å°å¹³å¸‚éˆ´æœ¨å…¬æ°‘é¤¨', pos: [35.7184, 139.4574], type: 'å…¬æ°‘é¤¨', icon: 'ğŸ¢'},
            {name: 'å°å¹³å¸‚ä¸Šæ°´å—å…¬æ°‘é¤¨', pos: [35.6984, 139.4774], type: 'å…¬æ°‘é¤¨', icon: 'ğŸ¢'},
            {name: 'å°å¹³å¸‚æ´¥ç”°å…¬æ°‘é¤¨', pos: [35.6984, 139.4974], type: 'å…¬æ°‘é¤¨', icon: 'ğŸ¢'},
            {name: 'å°å¹³å¸‚å¤§æ²¼å…¬æ°‘é¤¨', pos: [35.7584, 139.4774], type: 'å…¬æ°‘é¤¨', icon: 'ğŸ¢'},
            
            // éƒµä¾¿å±€
            {name: 'å°å¹³éƒµä¾¿å±€', pos: [35.7284, 139.4774], type: 'éƒµä¾¿å±€', icon: 'ğŸ“®'},
            {name: 'èŠ±å°é‡‘äº•éƒµä¾¿å±€', pos: [35.7484, 139.4574], type: 'éƒµä¾¿å±€', icon: 'ğŸ“®'},
            {name: 'å°å·éƒµä¾¿å±€', pos: [35.7384, 139.4674], type: 'éƒµä¾¿å±€', icon: 'ğŸ“®'},
            {name: 'é·¹ã®å°éƒµä¾¿å±€', pos: [35.6984, 139.4574], type: 'éƒµä¾¿å±€', icon: 'ğŸ“®'},
            {name: 'å­¦åœ’æ±ç”ºéƒµä¾¿å±€', pos: [35.6884, 139.4874], type: 'éƒµä¾¿å±€', icon: 'ğŸ“®'},
            {name: 'ä¸Šæ°´æœ¬ç”ºéƒµä¾¿å±€', pos: [35.6984, 139.4574], type: 'éƒµä¾¿å±€', icon: 'ğŸ“®'},
            {name: 'å¤©ç¥ç”ºéƒµä¾¿å±€', pos: [35.7284, 139.4974], type: 'éƒµä¾¿å±€', icon: 'ğŸ“®'},
            {name: 'å›ç”°éƒµä¾¿å±€', pos: [35.7284, 139.4574], type: 'éƒµä¾¿å±€', icon: 'ğŸ“®'},
            
            // åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼
            {name: 'å°å¹³å¸‚æ±éƒ¨åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', pos: [35.7384, 139.4874], type: 'åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', icon: 'ğŸ›ï¸'},
            {name: 'å°å¹³å¸‚è¥¿éƒ¨åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', pos: [35.7084, 139.4474], type: 'åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', icon: 'ğŸ›ï¸'},
            {name: 'å°å¹³å¸‚å—éƒ¨åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', pos: [35.6884, 139.4674], type: 'åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', icon: 'ğŸ›ï¸'},
            {name: 'å°å¹³å¸‚åŒ—éƒ¨åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', pos: [35.7484, 139.4774], type: 'åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', icon: 'ğŸ›ï¸'},
            {name: 'å°å¹³å¸‚ä¸­éƒ¨åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', pos: [35.7184, 139.4774], type: 'åœ°åŸŸã‚»ãƒ³ã‚¿ãƒ¼', icon: 'ğŸ›ï¸'}
        ];

        // å…¬å…±æ–½è¨­ã®æç”»
        facilities.forEach(facility => {
            let markerColor = '#4444ff';
            if (facility.type === 'å¸‚å½¹æ‰€') markerColor = '#ff0000';
            else if (facility.type === 'è­¦å¯Ÿç½²' || facility.type === 'äº¤ç•ª') markerColor = '#0066cc';
            else if (facility.type === 'æ¶ˆé˜²ç½²') markerColor = '#ff6600';
            else if (facility.type === 'éƒµä¾¿å±€') markerColor = '#cc0000';
            
            L.circleMarker(facility.pos, {
                radius: 8,
                fillColor: markerColor,
                color: '#ffffff',
                weight: 2,
                opacity: 1,
                fillOpacity: 0.8
            }).bindPopup(`<strong>${facility.name}</strong><br>ç¨®åˆ¥: ${facility.type}`).addTo(facilitiesLayer);
            
            // æ–½è¨­åãƒ©ãƒ™ãƒ«
            L.marker(facility.pos, {
                icon: L.divIcon({
                    className: 'custom-marker facility-marker',
                    html: `<div style="background:${markerColor}; color:white; padding:1px 3px; border-radius:2px; font-size:8px;">${facility.name}</div>`,
                    iconSize: [0, 0],
                    iconAnchor: [0, -25]
                })
            }).addTo(facilitiesLayer);
        });

        // è¡¨ç¤ºåˆ‡æ›¿æ©Ÿèƒ½
        document.getElementById('toggle-boundaries').addEventListener('change', function(e) {
            if (e.target.checked) {
                map.addLayer(boundariesLayer);
            } else {
                map.removeLayer(boundariesLayer);
            }
        });

        document.getElementById('toggle-roads').addEventListener('change', function(e) {
            if (e.target.checked) {
                map.addLayer(roadsLayer);
            } else {
                map.removeLayer(roadsLayer);
            }
        });

        document.getElementById('toggle-railways').addEventListener('change', function(e) {
            if (e.target.checked) {
                map.addLayer(railwaysLayer);
            } else {
                map.removeLayer(railwaysLayer);
            }
        });

        document.getElementById('toggle-rivers').addEventListener('change', function(e) {
            if (e.target.checked) {
                map.addLayer(riversLayer);
            } else {
                map.removeLayer(riversLayer);
            }
        });

        document.getElementById('toggle-facilities').addEventListener('change', function(e) {
            if (e.target.checked) {
                map.addLayer(facilitiesLayer);
            } else {
                map.removeLayer(facilitiesLayer);
            }
        });

        // åœ°å›³ã®å¢ƒç•Œã‚’å°å¹³å¸‚ã«åˆã‚ã›ã¦èª¿æ•´
        const bounds = L.latLngBounds([
            [35.6584, 139.4274], // å—è¥¿
            [35.7784, 139.5174]  // åŒ—æ±
        ]);
        map.fitBounds(bounds);
        
        // ã‚ºãƒ¼ãƒ ãƒ¬ãƒ™ãƒ«ã®èª¿æ•´
        map.setMaxBounds(bounds);
        map.setMinZoom(11);
        map.setMaxZoom(18);
        }
    </script>
</body>
</html>